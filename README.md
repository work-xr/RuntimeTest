## RuntimeTest for Android4.4

### 20180622修改点
```
1. 开始老化测试,开启Android-log, 当老化完成时关闭Android-log
2. 老化测试过程中会不断检查充电条件,如拔掉USB或AC充电线,自动退出老化测试
3. 老化测试过程中会不断检查充电状态:  
A->如果电量大于80, 则停止充电(如果正常或异常退出老化,则继续充电)  
B->如果电量小于80, 则继续充电  
4. 老化测试开始后,除非达到预设时间可以判定测试结果是成功或失败外,其他退出都视为测试结果失败
5. 老化测试项目未选择相机进行测试时,老化程序挂起,无法正常测试并退出
```

### 电池状态
```
电池电量: /sys/class/power_supply/battery/capacity
AC充电: /sys/class/power_supply/ac/online
USB充电: /sys/class/power_supply/usb/online
充电状态: /sys/class/power_supply/battery/stop_charge
```
### 老化步骤
```
    (1)循环老化开始时播放声音
    (2)进入主菜单,7秒
    (3)显示红色3秒
    (4)显示绿色3秒
    (5)显示蓝色3秒
    (6)显示白色3秒
    (7)显示黑色3秒
    (8)使振动器5秒
    (9)停止振动器
    (10)启动摄像头拍照
    (11)删除拍摄照片
    以上循环2 ~ 11步骤
```  
### 主要流程
```
1. 菜单有屏幕刷新, 马达, 喇叭, 相机四个选项, 可以选择测试项目
2. 预设时间有2, 4, 8, 16, 24, 48, 96可以选择测试时长
3. 开始测试
31. 判断是否连接充电线(AC或者USB线), 如果未连接, 退出老化程序  
32. 判断选择的测试项目, 如果选择了喇叭, 则播放音乐  
33. 如果选择了屏幕测试, 则设定背景色  
33. 发送广播, 开启Android-Log  
34. 创建阻塞队列BlockQueen, 将测试项目按顺序加入队列  
35. 检查充电条件: 是否连接充电线(AC或者USB线), 如果未连接, 跳到3C, 否则继续  
36. 检查充电状态: A->如果电量大于80, 则停止充电(如果正常或异常退出老化, 则继续充电)  B->如果电量小于80, 则继续充电  
37. 计算测试时长, 如果大于预设时长,  跳到3C, 否则继续  
38. 如果选择了屏幕测试, 每隔3秒变化屏幕颜色, 5次后退出屏幕测试  
39. 如果选择了马达测试, 震动5秒后退出马达测试  
3A. 如果选择了相机测试, 打开前置相机, 开始拍照, 拍照成功后退出相机测试, 删除照片  
3B. 跳到31  
3C. 退出老化程序  
3D. 删除callback, 恢复充电条件, 释放音乐资源  
3E. 发送广播, 关闭Android-Log  
3F. 写入老化测试站位
```
